<!DOCTYPE html>
<html lang = "en">
   
   <head>
      <meta charset = "utf-8">
      <meta http-equiv = "X-UA-Compatible" content = "IE = edge">
      <meta name = "viewport" content = "width = device-width, initial-scale = 1">
      
      <title>Maze Solving robot controls</title>
      
      <!-- Bootstrap -->
      <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      
      <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
      <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
      
      <!--[if lt IE 9]>
      <script src = "https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src = "https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
      
   </head>
   
   <body>
      <div class="container">
  <div class="row text-center">
	<h3>Controls for RC Robot:</h3>
	<h4> By: Vaibhav Savla, Meet Parekh, Abhishek Divekar</h4>
  </div>



<div class="row text-center">
    <div style="padding-bottom:25px;"  class="col-sm-12"><a href="/controls/forward" style="padding: 15px; width:30%; height:15%; max-width:200px;" class="btn btn-primary">Forward</a></div>
</div>
<div class="row text-center">
    <div style="padding-bottom:25px;"  class="col-sm-12"><a href="/controls/backward" style="padding: 15px; width:30%; height:15%; max-width:200px;" class="btn btn-primary">Backward</a></div>
</div>
<div class="row text-center" style="padding-bottom:25px">
    <div style=""  class="col-sm-6"><a href="/controls/left" style="padding: 15px; float:left; width:30%; height:15%; max-width:200px;"class="btn btn-primary">Left</a></div>
<!-- </div>
<div class="row text-center"> -->
    <div style=""  class="col-sm-6"><a href="/controls/right" style="padding: 15px; float:right; width:30%; height:15%; max-width:200px;" class="btn btn-primary">Right</a></div>
</div>

<div class="row text-center">
    <div class="col-sm-12"><a href="/controls/stop" style="padding: 15px; width:30%; height:15%; max-width:200px;" class="btn btn-primary">Stop</a></div>
</div>

<div class="row text-center">
	<div class="col-sm-12"> 
		<h2 id="ir_val"></h2>
	</div>
</div>


<script type="text/javascript">
	function getIRvals(){
        	ip = ""
	        ip_regex_result = window.location.href.match(/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}:\d{1,5}/);
        	if (ip_regex_result.length == 0){
                	return;
	        }
	        ip = ip_regex_result[0];
	        var xhttp = new XMLHttpRequest();
        	xhttp.onreadystatechange = function() {
                	if (this.readyState == 4 && this.status == 200) {
                        	var ir_val = this.responseText;
	                        document.getElementById('ir_val').innerHTML = "<br>IR sensors:<br>"+ir_val;
	                }
	        };
        	var ajax_fetch_url = "http://"+ip+"/ir_sensors";
	        //console.log(ajax_fetch_url);
        	xhttp.open("GET", ajax_fetch_url, true);
	        xhttp.send();
	}


	setInterval('getIRvals()', 500);
</script>

<div class="row text-center">
    {% if direction %}
        <h3> Last Command: {{ direction }}</h3>
    {% endif %}
</div>

  </div>
</div>
      
      <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
      <script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      
      <!-- Include all compiled plugins (below), or include individual files as needed -->
      <script src = "//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
      
   </body>
</html>
